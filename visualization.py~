import matplotlib.pyplot as plt
import seaborn as sns
from analysis import load_data  # Импортируем функцию из analysis.py


def visualize_topics():
    """
    Построение графика распределения новостей по темам (topic).
    """
    df = load_data()

    # Распределение тем
    print("Распределение тем:")
    print(df['topic'].value_counts())

    plt.figure(figsize=(10, 5))
    sns.countplot(x='topic', data=df, order=df['topic'].value_counts().index)
    plt.title('Распределение новостей по темам')
    plt.xlabel('Тема')
    plt.ylabel('Количество')
    plt.xticks(rotation=45)
    plt.tight_layout()
    plt.show()


def visualize_languages():
    """
    Построение диаграммы распределения новостей по языкам (lang).
    """
    df = load_data()

    print("Распределение языков:")
    print(df['lang'].value_counts())

    df['lang'].value_counts().plot(kind='pie', figsize=(6, 6), autopct='%1.1f%%')
    plt.title('Языки новостей')
    plt.ylabel('')
    plt.show()


if __name__ == "__main__":
    # При запуске файла напрямую - сразу вызываем обе функции
    visualize_topics()
    visualize_languages()
